{"ast":null,"code":"var _jsxFileName = \"/home/bill/Development/code-challenge-sweets-vendors/code-challenge/client/src/components/Vendor.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Sweet from \"./Sweet\";\nimport VendorSweetForm from \"./VendorSweetForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Vendor() {\n  _s();\n\n  const [{\n    data: vendor,\n    error,\n    status\n  }, setVendor] = useState({\n    data: null,\n    error: null,\n    status: \"pending\"\n  });\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fetch(`/vendors/${id}`).then(r => {\n      if (r.ok) {\n        r.json().then(vendor => setVendor({\n          data: vendor,\n          error: null,\n          status: \"resolved\"\n        }));\n      } else {\n        r.json().then(err => setVendor({\n          data: null,\n          error: err.error,\n          status: \"rejected\"\n        }));\n      }\n    });\n  }, [id]);\n\n  function handleAddSweet(sweet) {\n    setVendor({\n      data: { ...vendor,\n        vendor_sweets: [...vendor.vendor_sweets, sweet]\n      },\n      error: null,\n      status: \"resolved\"\n    });\n  }\n\n  function handleRemoveSweet(sweet) {\n    debugger;\n    setVendor({\n      data: { ...vendor,\n        vendor_sweets: vendor.vendor_sweets.filter(s => s.id !== sweet.id)\n      },\n      error: null,\n      status: \"resolved\"\n    });\n  }\n\n  if (status === \"pending\") return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 36\n  }, this);\n  if (status === \"rejected\") return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: [\"Error: \", error.error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 37\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: vendor.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Sweets:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: vendor.vendor_sweets.map(sweet => /*#__PURE__*/_jsxDEV(Sweet, {\n        sweet: sweet,\n        onRemoveSweet: handleRemoveSweet\n      }, sweet.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VendorSweetForm, {\n      vendorId: vendor.id,\n      onAddSweet: handleAddSweet\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Vendor, \"77bUIutNp+p5U+OngV/4WK/pkEE=\", false, function () {\n  return [useParams];\n});\n\n_c = Vendor;\nexport default Vendor;\n\nvar _c;\n\n$RefreshReg$(_c, \"Vendor\");","map":{"version":3,"sources":["/home/bill/Development/code-challenge-sweets-vendors/code-challenge/client/src/components/Vendor.js"],"names":["useEffect","useState","useParams","Sweet","VendorSweetForm","Vendor","data","vendor","error","status","setVendor","id","fetch","then","r","ok","json","err","handleAddSweet","sweet","vendor_sweets","handleRemoveSweet","filter","s","name","map"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Sweet from \"./Sweet\";\nimport VendorSweetForm from \"./VendorSweetForm\";\n\nfunction Vendor() {\n  const [{ data: vendor, error, status }, setVendor] = useState({\n    data: null,\n    error: null,\n    status: \"pending\",\n  });\n  const { id } = useParams();\n\n  useEffect(() => {\n    fetch(`/vendors/${id}`).then((r) => {\n      if (r.ok) {\n        r.json().then((vendor) =>\n          setVendor({ data: vendor, error: null, status: \"resolved\" })\n        );\n      } else {\n        r.json().then((err) =>\n          setVendor({ data: null, error: err.error, status: \"rejected\" })\n        );\n      }\n    });\n  }, [id]);\n\n  function handleAddSweet(sweet) {\n    setVendor({\n      data: { ...vendor, vendor_sweets: [...vendor.vendor_sweets, sweet] },\n      error: null,\n      status: \"resolved\",\n    });\n  }\n\n  function handleRemoveSweet(sweet) {\n    debugger;\n    setVendor({\n      data: {\n        ...vendor,\n        vendor_sweets: vendor.vendor_sweets.filter((s) => s.id !== sweet.id),\n      },\n      error: null,\n      status: \"resolved\",\n    });\n  }\n\n  if (status === \"pending\") return <h1>Loading...</h1>;\n  if (status === \"rejected\") return <h1>Error: {error.error}</h1>;\n\n  return (\n    <section>\n      <h2>{vendor.name}</h2>\n\n      <h3>Sweets:</h3>\n      <ul>\n        {vendor.vendor_sweets.map((sweet) => (\n          <Sweet\n            key={sweet.id}\n            sweet={sweet}\n            onRemoveSweet={handleRemoveSweet}\n          />\n        ))}\n      </ul>\n\n      <VendorSweetForm vendorId={vendor.id} onAddSweet={handleAddSweet} />\n    </section>\n  );\n}\n\nexport default Vendor;\n"]},"metadata":{},"sourceType":"module"}